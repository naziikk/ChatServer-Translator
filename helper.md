## Техническое Задание: Чат-сервер на C++

**1. Цель:**

Разработать чат-сервер, который позволяет нескольким клиентам подключаться и обмениваться текстовыми сообщениями в реальном времени.

**2. Функциональные требования:**

* **Подключение клиентов:** Сервер должен принимать соединения от клиентов (например, через TCP сокеты).
* **Обработка сообщений:** Сервер должен принимать текстовые сообщения от клиентов и рассылать их всем подключенным клиентам.
* **Управление клиентами:** Сервер должен отслеживать подключенных клиентов и удалять их при отключении.
* **Протокол общения:** Определить простой протокол обмена сообщениями между клиентом и сервером (например, JSON).
* **Логирование:** Сервер должен вести логирование основных событий (подключение/отключение клиентов, получение/отправка сообщений).


**3. Нефункциональные требования:**

* **Надежность:** Сервер должен быть устойчив к ошибкам и обеспечивать непрерывную работу.
* **Производительность:** Сервер должен эффективно обрабатывать большое количество подключений и сообщений.
* **Масштабируемость:** Сервер должен быть легко масштабируем для увеличения количества пользователей.


**4. Архитектура:**

* **Сервер:**
    * Принимает соединения от клиентов.
    * Обрабатывает входящие сообщения.
    * Рассылает сообщения всем подключенным клиентам.
    * Управляет списком подключенных клиентов.
    * Ведет логирование событий.
* **Клиент:**
    * Подключается к серверу.
    * Отправляет сообщения на сервер.
    * Получает сообщения от сервера и отображает их пользователю.


**5. Технологии:**

* **Язык программирования:** C++
* **Библиотеки:**
    * Boost.Asio (или другая библиотека для работы с сокетами)
    * Возможно, другие библиотеки для работы с потоками, JSON и т.д.
* **Операционная система:** Linux/Windows (по выбору)


**6. Этапы реализации:**

1. **Разработка серверной части:**
    * Создание сокета и ожидание подключений.
    * Прием и обработка входящих данных от клиентов.
    * Формирование и отправка ответов клиентам.
    * Управление списком подключенных клиентов.
    * Реализация протокола обмена сообщениями.
    * Логирование событий.
2. **Разработка клиентской части (пример):**
    * Подключение к серверу.
    * Отправка сообщений на сервер.
    * Прием и отображение сообщений от сервера.
3. **Тестирование:**
    * Проверка функциональности сервера и клиентов.
    * Нагрузочное тестирование для оценки производительности.


**7. Дополнительные возможности (опционально):**

* **Система аутентификации:** Введение логинов/паролей для пользователей.
* **Чаты с комнатами:** Разделение пользователей на разные чаты.
* **История сообщений:** Хранение и отображение истории сообщений.
* **Файловый обмен:** Возможность отправлять файлы между пользователями.


---

### Как это сделать:

**1. Подключение клиентов:**

* Используйте Boost.Asio или другую библиотеку для работы с сокетами.
* Создайте TCP сокет и слушайте соединения на определенном порту.
* Принимайте входящие соединения и создавайте отдельный поток для каждого клиента.

**2. Обработка сообщений:**

* В потоке каждого клиента:
    * Принимайте данные от клиента.
    * Парсите данные (например, JSON) и извлекайте сообщение.
    * Отправьте сообщение всем остальным подключенным клиентам.

**3. Управление клиентами:**

* Храните список подключенных клиентов (например, в `std::vector`).
* При отключении клиента удалите его из списка.

**4. Протокол общения:**

* Определите формат данных, которые будут передаваться между клиентом и сервером.
* Например, можно использовать JSON:
```json
{
  "type": "message",
  "sender": "User1",
  "text": "Hello!"
}
```

**5. Логирование:**

* Используйте `std::cerr` или другую библиотеку для логирования.
* Записывайте информацию о подключении/отключении клиентов, получении/отправке сообщений.

**Пример кода (фрагмент):**

```cpp
#include <boost/asio.hpp>
#include <iostream>
#include <thread>
#include <vector>

// ... (остальной код)

void handle_client(boost::asio::ip::tcp::socket socket) {
  // Принимать данные от клиента, обрабатывать и отправлять другим клиентам
}


int main() {
  boost::asio::io_context io_context;
  boost::asio::ip::tcp::acceptor acceptor(io_context, boost::asio::ip::tcp::endpoint(boost::asio::ip::tcp::v4(), 12345));

  while (true) {
    boost::asio::ip::tcp::socket socket(io_context);
    acceptor.accept(socket);

    std::thread client_thread(handle_client, std::move(socket));
    client_thread.detach();
  }

  return 0;
}
```

**Важно:** Это лишь базовый пример. Вам потребуется разработать более сложный код для реализации всех функций чат-сервера.

Надеюсь, это ТЗ и объяснения помогут вам начать работу над проектом!